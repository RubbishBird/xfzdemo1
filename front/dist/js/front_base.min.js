function FrontBase(){}function Auth(){var t=this;t.maskWrapper=$(".mask-wrapper"),t.scrollWrapper=$(".scroll-wrapper"),t.smsCaptcha=$(".sms-captcha-btn")}FrontBase.prototype.run=function(){this.listenAuthBoxHover()},FrontBase.prototype.listenAuthBoxHover=function(){var t=$(".auth-box"),n=$(".user-more-box");t.hover(function(){n.show()},function(){n.hide()})},Auth.prototype.run=function(){var t=this;t.ListenShowHideEvent(),t.listenSwitchEvent(),t.listenSigninEvent(),t.listenImgCaptchaEvent(),t.listenSmsCaptchaEvent(),t.listenSignupEvent()},Auth.prototype.showEvent=function(){this.maskWrapper.show()},Auth.prototype.hideEvent=function(){this.maskWrapper.hide()},Auth.prototype.smsSuccessEvent=function(){var t=this;messageBox.showSuccess("短信验证码发送成功！"),t.smsCaptcha.addClass("disabled");var n=60;t.smsCaptcha.unbind("click");var e=setInterval(function(){t.smsCaptcha.text(n+"s"),(n-=1)<=0&&(clearInterval(e),t.smsCaptcha.removeClass("disabled"),t.smsCaptcha.text("发送验证码"),t.listenSmsCaptchaEvent())},1e3)},Auth.prototype.ListenShowHideEvent=function(){var t=this,n=$(".signin-btn"),e=$(".signup-btn"),s=$(".close-btn"),a=$(".scroll-wrapper");n.click(function(){t.showEvent(),a.css({left:0})}),e.click(function(){t.showEvent(),a.css({left:-400})}),s.click(function(){t.hideEvent()})},Auth.prototype.listenSwitchEvent=function(){var n=this;$(".switch").click(function(){var t=n.scrollWrapper.css("left");(t=parseInt(t))<0?n.scrollWrapper.animate({left:"0"}):n.scrollWrapper.animate({left:"-400px"})})},Auth.prototype.listenImgCaptchaEvent=function(){var t=$(".img_captcha");t.click(function(){t.attr("src","account/img_captcha?random="+Math.random())})},Auth.prototype.listenSmsCaptchaEvent=function(){var n=this,e=$(".signup-group input[name = 'telephone']");n.smsCaptcha.click(function(){var t=e.val();t||window.messageBox.showInfo("请输入手机号码！"),xfzajax.get({url:"/account/sms_captcha",data:{telephone:t},success:function(t){200==t.code&&n.smsSuccessEvent()},fail:function(t){console.log(t)}})})},Auth.prototype.listenSigninEvent=function(){var a=this,t=$(".signin-group"),o=t.find("input[name='telephone']"),i=t.find("input[name='password']"),c=t.find("input[name='remember']");t.find(".submit-btn").click(function(t){t.preventDefault();var n=o.val(),e=i.val(),s=c.prop("checked");xfzajax.post({url:"/account/login/",data:{telephone:n,password:e,remember:s?1:0},success:function(t){if(200==t.code)a.hideEvent(),window.location.reload();else{var n=t.message;if("string"==typeof n||n.constructor==String)window.messageBox.show(n);else for(var e in n){var s=n[e][0];window.messageBox.show(s)}}},fail:function(t){console.log(t)}})})},Auth.prototype.listenSignupEvent=function(){var f=$(".signup-group");f.find(".submit-btn").click(function(t){t.preventDefault();var n=f.find("input[name='telephone']"),e=f.find("input[name='username']"),s=f.find("input[name='img-captcha']"),a=f.find("input[name='password1']"),o=f.find("input[name='password2']"),i=f.find("input[name='sms-captcha']"),c=n.val(),r=e.val(),p=s.val(),u=a.val(),l=o.val(),h=i.val();xfzajax.post({url:"/account/register/",data:{telephone:c,username:r,imgCaptcha:p,password1:u,password2:l,smscaptcha:h},success:function(t){if(200===t.code);else{var n=t.message;if("string"==typeof n||n.constructor==String)window.messageBox.showError(n);else for(var e in n){var s=n[e][0];window.messageBox.showError(s)}}},fail:function(t){console.log(t)}})})},$(function(){(new Auth).run()}),$(function(){(new FrontBase).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZyb250X2Jhc2UuanMiXSwibmFtZXMiOlsiRnJvbnRCYXNlIiwiQXV0aCIsInNlbGYiLCJ0aGlzIiwibWFza1dyYXBwZXIiLCIkIiwic2Nyb2xsV3JhcHBlciIsInNtc0NhcHRjaGEiLCJwcm90b3R5cGUiLCJydW4iLCJsaXN0ZW5BdXRoQm94SG92ZXIiLCJhdXRoQm94IiwidXNlck1vcmVCb3giLCJob3ZlciIsInNob3ciLCJoaWRlIiwiTGlzdGVuU2hvd0hpZGVFdmVudCIsImxpc3RlblN3aXRjaEV2ZW50IiwibGlzdGVuU2lnbmluRXZlbnQiLCJsaXN0ZW5JbWdDYXB0Y2hhRXZlbnQiLCJsaXN0ZW5TbXNDYXB0Y2hhRXZlbnQiLCJsaXN0ZW5TaWdudXBFdmVudCIsInNob3dFdmVudCIsImhpZGVFdmVudCIsInNtc1N1Y2Nlc3NFdmVudCIsIm1lc3NhZ2VCb3giLCJzaG93U3VjY2VzcyIsImFkZENsYXNzIiwiY291bnQiLCJ1bmJpbmQiLCJ0aW1lciIsInNldEludGVydmFsIiwidGV4dCIsImNsZWFySW50ZXJ2YWwiLCJyZW1vdmVDbGFzcyIsInNpZ25pbmJ0biIsInNpZ251cGJ0biIsImNsb3NlYnRuIiwic2Nyb2xsd3JhcHBlciIsImNsaWNrIiwiY3NzIiwibGVmdCIsImN1cnJlbnRMZWZ0IiwicGFyc2VJbnQiLCJhbmltYXRlIiwiSW1hZ2VDYXB0Y2hhIiwiYXR0ciIsIk1hdGgiLCJyYW5kb20iLCJ0ZWxlcGhvbmVJbnB1dCIsInRlbGVwaG9uZSIsInZhbCIsIndpbmRvdyIsInNob3dJbmZvIiwieGZ6YWpheCIsImdldCIsInVybCIsImRhdGEiLCJzdWNjZXNzIiwicmVzdWx0IiwiZmFpbCIsImVycm9yIiwiY29uc29sZSIsImxvZyIsInNpZ25pbkdyb3VwIiwiZmluZCIsInBhc3N3b3JkSW5wdXQiLCJyZW1lbWJlcklucHV0IiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInBhc3N3b3JkIiwicmVtZW1iZXIiLCJwcm9wIiwicG9zdCIsImxvY2F0aW9uIiwicmVsb2FkIiwibWVzc2FnZWNvZGUiLCJjb25zdHJ1Y3RvciIsIlN0cmluZyIsImtleSIsIm1lc3NhZ2UiLCJzaWdudXBHcm91cCIsInVzZXJuYW1lSW5wdXQiLCJpbWdDYXB0Y2hhSW5wdXQiLCJwYXNzd29yZDFJbnB1dCIsInBhc3N3b3JkMklucHV0Iiwic21zY2FwdGNoYUlucHV0IiwidXNlcm5hbWUiLCJpbWdDYXB0Y2hhIiwicGFzc3dvcmQxIiwicGFzc3dvcmQyIiwic21zY2FwdGNoYSIsIm1lc3NhZ2VPYmplY3QiLCJzaG93RXJyb3IiXSwibWFwcGluZ3MiOiJBQUVBLFNBQVNBLGFBc0JULFNBQVNDLE9BQ0wsSUFBSUMsRUFBT0MsS0FDWEQsRUFBS0UsWUFBY0MsRUFBRSxpQkFDckJILEVBQUtJLGNBQWdCRCxFQUFFLG1CQUN2QkgsRUFBS0ssV0FBYUYsRUFBRSxvQkF0QnhCTCxVQUFVUSxVQUFVQyxJQUFNLFdBQ1hOLEtBQ05PLHNCQUdUVixVQUFVUSxVQUFVRSxtQkFBcUIsV0FDckMsSUFBSUMsRUFBVU4sRUFBRSxhQUNaTyxFQUFjUCxFQUFFLGtCQUNwQk0sRUFBUUUsTUFBTSxXQUNWRCxFQUFZRSxRQUNkLFdBQ0VGLEVBQVlHLFVBY3BCZCxLQUFLTyxVQUFVQyxJQUFNLFdBQ2pCLElBQUlQLEVBQU9DLEtBQ1hELEVBQUtjLHNCQUNMZCxFQUFLZSxvQkFDTGYsRUFBS2dCLG9CQUNMaEIsRUFBS2lCLHdCQUNMakIsRUFBS2tCLHdCQUNMbEIsRUFBS21CLHFCQUdUcEIsS0FBS08sVUFBVWMsVUFBWSxXQUNabkIsS0FDTkMsWUFBWVUsUUFHckJiLEtBQUtPLFVBQVVlLFVBQVksV0FDWnBCLEtBQ05DLFlBQVlXLFFBR3JCZCxLQUFLTyxVQUFVZ0IsZ0JBQWtCLFdBQzdCLElBQUl0QixFQUFPQyxLQUNYc0IsV0FBV0MsWUFBWSxjQUNuQnhCLEVBQUtLLFdBQVdvQixTQUFTLFlBQ3pCLElBQUlDLEVBQVEsR0FDWjFCLEVBQUtLLFdBQVdzQixPQUFPLFNBQ3ZCLElBQUlDLEVBQVFDLFlB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Q2xDaUIsRUFBZ0JELEVBQVloQixLQUFLLDBCQUNqQ2tCLEVBQWtCRixFQUFZaEIsS0FBSyw2QkFDbkNtQixFQUFpQkgsRUFBWWhCLEtBQUssMkJBQ2xDb0IsRUFBaUJKLEVBQVloQixLQUFLLDJCQUNsQ3FCLEVBQWtCTCxFQUFZaEIsS0FBSyw2QkFFbkNmLEVBQVlELEVBQWVFLE1BQzNCb0MsRUFBV0wsRUFBYy9CLE1BQ3pCcUMsRUFBYUwsRUFBZ0JoQyxNQUM3QnNDLEVBQVlMLEVBQWVqQyxNQUMzQnVDLEVBQVlMLEVBQWVsQyxNQUMzQndDLEVBQWFMLEVBQWdCbkMsTUFFakNHLFFBQVFtQixLQUFLLENBQ2JqQixJQUFNLHFCQUNOQyxLQUFPLENBQ0hQLFVBQVlBLEVBQ1pxQyxTQUFXQSxFQUNYQyxXQUFhQSxFQUNiQyxVQUFZQSxFQUNaQyxVQUFZQSxFQUNaQyxXQUFhQSxHQUVqQmpDLFFBQVUsU0FBVUMsR0FDaEIsR0FBc0IsTUFBbkJBLEVBQWEsVUFFWCxDQUNELElBQUlpQyxFQUFnQmpDLEVBQWdCLFFBQ3BDLEdBQTJCLGlCQUFqQmlDLEdBQTZCQSxFQUFjZixhQUFlQyxPQUNoRTFCLE9BQU8zQixXQUFXb0UsVUFBVUQsUUFHNUIsSUFBSSxJQUFJYixLQUFPYSxFQUFjLENBQ3pCLElBQ0laLEVBRFdZLEVBQWNiLEdBQ04sR0FDdkIzQixPQUFPM0IsV0FBV29FLFVBQVViLE1BS3hDcEIsS0FBTyxTQUFVQyxHQUNiQyxRQUFRQyxJQUFJRixTQVU1QnhELEVBQUUsWUFDWSxJQUFJSixNQUNWUSxRQUlSSixFQUFFLFlBQ2tCLElBQUlMLFdBQ1ZTIiwiZmlsZSI6ImZyb250X2Jhc2UubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbi8v5pON5L2c5a+86Iiq5p2h55qEXHJcbmZ1bmN0aW9uIEZyb250QmFzZSgpIHtcclxuXHJcbn1cclxuXHJcbkZyb250QmFzZS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYubGlzdGVuQXV0aEJveEhvdmVyKCk7XHJcbn07XHJcblxyXG5Gcm9udEJhc2UucHJvdG90eXBlLmxpc3RlbkF1dGhCb3hIb3ZlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBhdXRoQm94ID0gJCgnLmF1dGgtYm94Jyk7XHJcbiAgICB2YXIgdXNlck1vcmVCb3ggPSAkKCcudXNlci1tb3JlLWJveCcpO1xyXG4gICAgYXV0aEJveC5ob3ZlcihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdXNlck1vcmVCb3guc2hvdygpO1xyXG4gICAgfSxmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdXNlck1vcmVCb3guaGlkZSgpO1xyXG4gICAgfSk7XHJcblxyXG59O1xyXG5cclxuXHJcbi8v5pON5L2c55m75b2V5rOo5YaM55qEXHJcbmZ1bmN0aW9uIEF1dGgoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLm1hc2tXcmFwcGVyID0gJCgnLm1hc2std3JhcHBlcicpO1xyXG4gICAgc2VsZi5zY3JvbGxXcmFwcGVyID0gJChcIi5zY3JvbGwtd3JhcHBlclwiKTtcclxuICAgIHNlbGYuc21zQ2FwdGNoYSA9ICQoJy5zbXMtY2FwdGNoYS1idG4nKTtcclxufVxyXG5cclxuQXV0aC5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYuTGlzdGVuU2hvd0hpZGVFdmVudCgpO1xyXG4gICAgc2VsZi5saXN0ZW5Td2l0Y2hFdmVudCgpO1xyXG4gICAgc2VsZi5saXN0ZW5TaWduaW5FdmVudCgpO1xyXG4gICAgc2VsZi5saXN0ZW5JbWdDYXB0Y2hhRXZlbnQoKTtcclxuICAgIHNlbGYubGlzdGVuU21zQ2FwdGNoYUV2ZW50KCk7XHJcbiAgICBzZWxmLmxpc3RlblNpZ251cEV2ZW50KCk7XHJcbn07XHJcblxyXG5BdXRoLnByb3RvdHlwZS5zaG93RXZlbnQgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5tYXNrV3JhcHBlci5zaG93KCk7XHJcbn07XHJcblxyXG5BdXRoLnByb3RvdHlwZS5oaWRlRXZlbnQgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5tYXNrV3JhcHBlci5oaWRlKCk7XHJcbn07XHJcblxyXG5BdXRoLnByb3RvdHlwZS5zbXNTdWNjZXNzRXZlbnQgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgbWVzc2FnZUJveC5zaG93U3VjY2Vzcygn55+t5L+h6aqM6K+B56CB5Y+R6YCB5oiQ5Yqf77yBJylcclxuICAgICAgICBzZWxmLnNtc0NhcHRjaGEuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgdmFyIGNvdW50ID0gNjA7XHJcbiAgICAgICAgc2VsZi5zbXNDYXB0Y2hhLnVuYmluZCgnY2xpY2snKTtcclxuICAgICAgICB2YXIgdGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgc2VsZi5zbXNDYXB0Y2hhLnRleHQoY291bnQrJ3MnKTtcclxuICAgICAgICAgICBjb3VudC09IDE7XHJcbiAgICAgICAgICAgaWYoY291bnQ8PTApe1xyXG4gICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVyKTtcclxuICAgICAgICAgICAgICAgc2VsZi5zbXNDYXB0Y2hhLnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgICAgICAgICBzZWxmLnNtc0NhcHRjaGEudGV4dCgn5Y+R6YCB6aqM6K+B56CBJyk7XHJcbiAgICAgICAgICAgICAgIHNlbGYubGlzdGVuU21zQ2FwdGNoYUV2ZW50KCk7XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgIH0sMTAwMCk7XHJcblxyXG59O1xyXG5cclxuQXV0aC5wcm90b3R5cGUuTGlzdGVuU2hvd0hpZGVFdmVudCA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgc2lnbmluYnRuID0gJCgnLnNpZ25pbi1idG4nKTtcclxuICAgIHZhciBzaWdudXBidG4gPSAkKCcuc2lnbnVwLWJ0bicpO1xyXG4gICAgdmFyIGNsb3NlYnRuID0gJCgnLmNsb3NlLWJ0bicpO1xyXG4gICAgdmFyIHNjcm9sbHdyYXBwZXIgPSAkKCcuc2Nyb2xsLXdyYXBwZXInKTtcclxuICAgIHNpZ25pbmJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5zaG93RXZlbnQoKTtcclxuICAgICAgICBzY3JvbGx3cmFwcGVyLmNzcyh7J2xlZnQnOjB9KTtcclxuICAgIH0pO1xyXG4gICAgc2lnbnVwYnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgIHNlbGYuc2hvd0V2ZW50KCk7XHJcbiAgICAgICBzY3JvbGx3cmFwcGVyLmNzcyh7J2xlZnQnOi00MDB9KTtcclxuICAgIH0pO1xyXG4gICAgY2xvc2VidG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgc2VsZi5oaWRlRXZlbnQoKTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuQXV0aC5wcm90b3R5cGUubGlzdGVuU3dpdGNoRXZlbnQgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIHN3aXRjaGVyID0gJChcIi5zd2l0Y2hcIik7XHJcbiAgICBzd2l0Y2hlci5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGN1cnJlbnRMZWZ0ID0gc2VsZi5zY3JvbGxXcmFwcGVyLmNzcyhcImxlZnRcIilcclxuICAgICAgICBjdXJyZW50TGVmdCA9IHBhcnNlSW50KGN1cnJlbnRMZWZ0KVxyXG4gICAgICAgIGlmKGN1cnJlbnRMZWZ0IDwgMCl7XHJcbiAgICAgICAgICAgIHNlbGYuc2Nyb2xsV3JhcHBlci5hbmltYXRlKHtcImxlZnRcIjpcIjBcIn0pO1xyXG4gICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgc2VsZi5zY3JvbGxXcmFwcGVyLmFuaW1hdGUoe1wibGVmdFwiOlwiLTQwMHB4XCJ9KVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59O1xyXG5cclxuQXV0aC5wcm90b3R5cGUubGlzdGVuSW1nQ2FwdGNoYUV2ZW50ID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBJbWFnZUNhcHRjaGEgPSAkKCcuaW1nX2NhcHRjaGEnKTtcclxuICAgIEltYWdlQ2FwdGNoYS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgSW1hZ2VDYXB0Y2hhLmF0dHIoJ3NyYycsJ2FjY291bnQvaW1nX2NhcHRjaGEnKyc/cmFuZG9tPScrTWF0aC5yYW5kb20oKSlcclxuICAgIH0pO1xyXG59O1xyXG5cclxuQXV0aC5wcm90b3R5cGUubGlzdGVuU21zQ2FwdGNoYUV2ZW50ID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciB0ZWxlcGhvbmVJbnB1dCA9ICQoXCIuc2lnbnVwLWdyb3VwIGlucHV0W25hbWUgPSAndGVsZXBob25lJ11cIik7XHJcbiAgICBzZWxmLnNtc0NhcHRjaGEuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgdmFyIHRlbGVwaG9uZSA9IHRlbGVwaG9uZUlucHV0LnZhbCgpO1xyXG4gICAgICAgaWYoIXRlbGVwaG9uZSl7XHJcbiAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd0luZm8oJ+ivt+i+k+WFpeaJi+acuuWPt+egge+8gScpO1xyXG4gICAgICAgfVxyXG4gICAgICAgeGZ6YWpheC5nZXQoe1xyXG4gICAgICAgICAgICd1cmwnOicvYWNjb3VudC9zbXNfY2FwdGNoYScsXHJcbiAgICAgICAgICAgJ2RhdGEnOntcclxuICAgICAgICAgICAgICAgJ3RlbGVwaG9uZSc6dGVsZXBob25lXHJcbiAgICAgICAgICAgfSxcclxuICAgICAgICAgICAnc3VjY2Vzcyc6ZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXT09MjAwKXtcclxuICAgICAgICAgICAgICAgICAgIHNlbGYuc21zU3VjY2Vzc0V2ZW50KCk7XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICdmYWlsJzpmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpXHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgfSlcclxuICAgIH0pO1xyXG59O1xyXG5cclxuXHJcbkF1dGgucHJvdG90eXBlLmxpc3RlblNpZ25pbkV2ZW50ID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBzaWduaW5Hcm91cCA9ICQoJy5zaWduaW4tZ3JvdXAnKTtcclxuICAgIHZhciB0ZWxlcGhvbmVJbnB1dCA9IHNpZ25pbkdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSd0ZWxlcGhvbmUnXVwiKTtcclxuICAgIHZhciBwYXNzd29yZElucHV0ID0gc2lnbmluR3JvdXAuZmluZChcImlucHV0W25hbWU9J3Bhc3N3b3JkJ11cIik7XHJcbiAgICB2YXIgcmVtZW1iZXJJbnB1dCA9IHNpZ25pbkdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdyZW1lbWJlciddXCIpO1xyXG5cclxuICAgIHZhciBzdWJtaXRCdG4gPSBzaWduaW5Hcm91cC5maW5kKCcuc3VibWl0LWJ0bicpO1xyXG4gICAgc3VibWl0QnRuLmNsaWNrKGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdmFyIHRlbGVwaG9uZSA9IHRlbGVwaG9uZUlucHV0LnZhbCgpO1xyXG4gICAgICAgIHZhciBwYXNzd29yZCA9IHBhc3N3b3JkSW5wdXQudmFsKCk7XHJcbiAgICAgICAgdmFyIHJlbWVtYmVyID0gcmVtZW1iZXJJbnB1dC5wcm9wKCdjaGVja2VkJyk7XHJcblxyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOicvYWNjb3VudC9sb2dpbi8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6e1xyXG4gICAgICAgICAgICAgICAgJ3RlbGVwaG9uZSc6dGVsZXBob25lLFxyXG4gICAgICAgICAgICAgICAgJ3Bhc3N3b3JkJzpwYXNzd29yZCxcclxuICAgICAgICAgICAgICAgICdyZW1lbWJlcic6cmVtZW1iZXI/MTowXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzpmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXSA9PSAyMDApe1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuaGlkZUV2ZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2Vjb2RlID0gcmVzdWx0WydtZXNzYWdlJ107XHJcbiAgICAgICAgICAgICAgICAgICAgaWYodHlwZW9mIG1lc3NhZ2Vjb2RlID09ICdzdHJpbmcnIHx8IG1lc3NhZ2Vjb2RlLmNvbnN0cnVjdG9yID09IFN0cmluZyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3cobWVzc2FnZWNvZGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGtleSBpbiBtZXNzYWdlY29kZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZXMgPSBtZXNzYWdlY29kZVtrZXldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBtZXNzYWdlc1swXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3cobWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnZmFpbCc6ZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbkF1dGgucHJvdG90eXBlLmxpc3RlblNpZ251cEV2ZW50ID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzaWdudXBHcm91cCA9ICQoJy5zaWdudXAtZ3JvdXAnKTtcclxuICAgIHZhciBzdWJtaXRCdG4gPSBzaWdudXBHcm91cC5maW5kKCcuc3VibWl0LWJ0bicpO1xyXG4gICAgc3VibWl0QnRuLmNsaWNrKGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdmFyIHRlbGVwaG9uZUlucHV0ID0gc2lnbnVwR3JvdXAuZmluZChcImlucHV0W25hbWU9J3RlbGVwaG9uZSddXCIpO1xyXG4gICAgICAgIHZhciB1c2VybmFtZUlucHV0ID0gc2lnbnVwR3JvdXAuZmluZChcImlucHV0W25hbWU9J3VzZXJuYW1lJ11cIik7XHJcbiAgICAgICAgdmFyIGltZ0NhcHRjaGFJbnB1dCA9IHNpZ251cEdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdpbWctY2FwdGNoYSddXCIpO1xyXG4gICAgICAgIHZhciBwYXNzd29yZDFJbnB1dCA9IHNpZ251cEdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdwYXNzd29yZDEnXVwiKTtcclxuICAgICAgICB2YXIgcGFzc3dvcmQySW5wdXQgPSBzaWdudXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ncGFzc3dvcmQyJ11cIik7XHJcbiAgICAgICAgdmFyIHNtc2NhcHRjaGFJbnB1dCA9IHNpZ251cEdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdzbXMtY2FwdGNoYSddXCIpO1xyXG5cclxuICAgICAgICB2YXIgdGVsZXBob25lID0gdGVsZXBob25lSW5wdXQudmFsKCk7XHJcbiAgICAgICAgdmFyIHVzZXJuYW1lID0gdXNlcm5hbWVJbnB1dC52YWwoKTtcclxuICAgICAgICB2YXIgaW1nQ2FwdGNoYSA9IGltZ0NhcHRjaGFJbnB1dC52YWwoKTtcclxuICAgICAgICB2YXIgcGFzc3dvcmQxID0gcGFzc3dvcmQxSW5wdXQudmFsKCk7XHJcbiAgICAgICAgdmFyIHBhc3N3b3JkMiA9IHBhc3N3b3JkMklucHV0LnZhbCgpO1xyXG4gICAgICAgIHZhciBzbXNjYXB0Y2hhID0gc21zY2FwdGNoYUlucHV0LnZhbCgpO1xyXG5cclxuICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICd1cmwnOicvYWNjb3VudC9yZWdpc3Rlci8nLFxyXG4gICAgICAgICdkYXRhJzp7XHJcbiAgICAgICAgICAgICd0ZWxlcGhvbmUnOnRlbGVwaG9uZSxcclxuICAgICAgICAgICAgJ3VzZXJuYW1lJzp1c2VybmFtZSxcclxuICAgICAgICAgICAgJ2ltZ0NhcHRjaGEnOmltZ0NhcHRjaGEsXHJcbiAgICAgICAgICAgICdwYXNzd29yZDEnOnBhc3N3b3JkMSxcclxuICAgICAgICAgICAgJ3Bhc3N3b3JkMic6cGFzc3dvcmQyLFxyXG4gICAgICAgICAgICAnc21zY2FwdGNoYSc6c21zY2FwdGNoYSxcclxuICAgICAgICB9LFxyXG4gICAgICAgICdzdWNjZXNzJzpmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgIGlmKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xyXG4gICAgICAgICAgICAgICAgLy8gd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlT2JqZWN0ID0gcmVzdWx0WydtZXNzYWdlJ107XHJcbiAgICAgICAgICAgICAgICBpZih0eXBlb2YgbWVzc2FnZU9iamVjdCA9PSAnc3RyaW5nJyB8fCBtZXNzYWdlT2JqZWN0LmNvbnN0cnVjdG9yID09IFN0cmluZyl7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd0Vycm9yKG1lc3NhZ2VPYmplY3QpO1xyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8ge1wicGFzc3dvcmRcIjpbJ+WvhueggeacgOWkp+mVv+W6puS4jeiDvei2hei/hzIw5Li677yBJywneHh4J10sXCJ0ZWxlcGhvbmVcIjpbJ3h4JywneCddfVxyXG4gICAgICAgICAgICAgICAgICAgIGZvcih2YXIga2V5IGluIG1lc3NhZ2VPYmplY3Qpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZXMgPSBtZXNzYWdlT2JqZWN0W2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0gbWVzc2FnZXNbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3dFcnJvcihtZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgICAgICAnZmFpbCc6ZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcilcclxuICAgICAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICB9KTtcclxuXHJcblxyXG59O1xyXG5cclxuXHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgdmFyIGF1dGggPSBuZXcgQXV0aCgpO1xyXG4gICBhdXRoLnJ1bigpO1xyXG59KTtcclxuXHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBmcm9udEJhc2UgPSBuZXcgRnJvbnRCYXNlKCk7XHJcbiAgICBmcm9udEJhc2UucnVuKCk7XHJcbn0pIl19
